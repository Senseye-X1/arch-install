loadkeys sv-latin1
timedatectl set-ntp true
mkfs.vfat -F32 /dev/nvme1n1p1 
mkfs.btrfs -f /dev/mapper/linux--vg-arch 
mount /dev/mapper/linux--vg-arch /mnt
btrfs subvolume create /mnt/@
btrfs subvolume create /mnt/@home
btrfs subvolume create /mnt/@snapshots
btrfs subvolume create /mnt/@var_log
btrfs subvolume create /mnt/@pkg
umount /mnt
mount -o noatime,compress=zstd:1,space_cache=v2,discard=async,subvol=@ /dev/mapper/linux--vg-arch /mnt
mkdir -p /mnt/{boot,home,.snapshots,var/log,var/cache/pacman/pkg}
mount -o noatime,compress=zstd:1,space_cache=v2,discard=async,subvol=@home /dev/mapper/linux--vg-arch /mnt/home
mount -o noatime,compress=zstd:1,space_cache=v2,discard=async,subvol=@snapshots /dev/mapper/linux--vg-arch /mnt/.snapshots
mount -o noatime,compress=zstd:1,space_cache=v2,discard=async,subvol=@var_log /dev/mapper/linux--vg-arch /mnt/var/log
mount -o noatime,compress=zstd:1,space_cache=v2,discard=async,subvol=@pkg /dev/mapper/linux--vg-arch /mnt/var/cache/pacman/pkg
mount /dev/nvme1n1p1 /mnt/boot
swapon /dev/mapper/linux--vg-swap
pacstrap /mnt base linux linux-firmware amd-ucode btrfs-progs git nano
genfstab -U /mnt >> /mnt/etc/fstab
arch-chroot /mnt

git clone https://github.com/andnix/arch_install.git
nano /arch_install/install.uefi (change password for root and user)
chmod +x /arch_install/install-uefi.sh
chmod +x /arch_install/install-bspwm.sh
./arch_install/install_uefi.sh

Minimal:
accountsservice
amd-ucode
arc-gtk-theme
base
base-devel (autoconf automake binutils bison fakeroot flex gcc groff libtool m4 make patch pkgconf sudo texinfo which)
bspwm
efibootmgr
feh
firefox
firewalld
geany
git
grub
grub-btrfs
kitty
light-locker
lightdm-gtk-greeter
lightdm-gtk-greeter-settings
linux
linux-firmware
lvm2
lxappearance-gtk3
nano
networkmanager
nvidia
nvidia-settings
os-prober
pacman-contrib
picom
polybar
pulseaudio
rofi
rsync
snap-pac
snapper
sxhkd
ttf-font-awesome
ttf-roboto
udiskie
xautolock
xorg-xprop
xorg-xrandr
xorg-xrdb
xorg-xset
zsh
zsh-autosuggestions
zsh-completions

Normal:

accountsservice
*amd-ucode
archlinux-wallpaper
*base
*base-devel (autoconf automake binutils bison fakeroot flex gcc groff libtool m4 make patch pkgconf sudo texinfo which)
bspwm
*btrfs-progs
dunst
efibootmgr
feh
firefox
firewalld
geany
git
gnome-themes-extra
grub
grub-btrfs
kitty
light-locker
lightdm-gtk-greeter
lightdm-gtk-greeter-settings
*linux
*linux-firmware
*lvm2
lxappearance-gtk3
*nano
networkmanager
nvidia
nvidia-settings
os-prober
pacman-contrib
picom
polybar
pulseaudio
rofi
rsync
snap-pac
snapper
sxhkd
ttf-font-awesome
ttf-roboto
udiskie
xautolock
xorg
zsh
zsh-autosuggestions
zsh-completions

-----------------------------

/etc/mkinitcpio.conf:
HOOKS=(base udev autodetect modconf block lvm2 filesystems keyboard fsck)

-----------------------------

localectl status
   System Locale: LANG=en_US.UTF-8
       VC Keymap: sv-latin1
      X11 Layout: se

localectl set-x11-keymap se

-----------------------------

systemctl enabled services:

grub-btrfs.path
firewalld.service
lightdm.service
NetworkManager-dispatcher.service
NetworkManager-wait-online.service
NetworkManager.service
systemd-timesyncd.service
snapper-cleanup.timer
snapper-timeline.timer

-----------------------------
